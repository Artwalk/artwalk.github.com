<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="I tried the XFyun, but it’s not suitable for the recognized result, so I am looking for another recognizer to do some tests.  QQ  Baidu  Google   The great news is that they all support the PCM type t">
<meta name="keywords" content="Machine Learning">
<meta property="og:type" content="article">
<meta property="og:title" content="More how to convert video to text">
<meta property="og:url" content="https:&#x2F;&#x2F;leihao0.github.io&#x2F;2018&#x2F;07&#x2F;23&#x2F;More-how-to-convert-video-to-text&#x2F;index.html">
<meta property="og:site_name" content="LeiHao&#39;s Blog">
<meta property="og:description" content="I tried the XFyun, but it’s not suitable for the recognized result, so I am looking for another recognizer to do some tests.  QQ  Baidu  Google   The great news is that they all support the PCM type t">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-01-11T13:07:35.000Z">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/logo.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/logo-192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/logo-192.png">
          
        
    
    <!-- title -->
    <title>More how to convert video to text</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="LeiHao&#39;s Blog" type="application/atom+xml" />
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/donate/">Donate</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/08/10/How-to-download-videos-concurrently-from-youtube-and-batch-embed-their-subtitles/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/07/22/How-to-convert-video-to-text/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&text=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&is_video=false&description=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=More how to convert video to text&body=Check out this article: https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/" target="_blank" rel="noopener"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&name=More how to convert video to text&description=&lt;p&gt;I tried the XFyun, but it’s not suitable for the recognized result, so I am looking for another recognizer to do some tests.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://ai.qq.com/product/aaiasr.shtml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;QQ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://ai.baidu.com/docs#/ASR-Online-Python-SDK/top&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Baidu&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://cloud.google.com/speech-to-text/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The great news is that they all support the &lt;code&gt;PCM&lt;/code&gt; type that converted earlier, so I need to do some change to the shell. When you want to compare the results from different recognizer, just run:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;test.sh xfyun.py|baidu.py|qq.py test.mp4|.m4a&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Honestly, Google’s result looks better with the human eyes of a glance.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;test.sh&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/zsh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;py=$&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;filename=$(echo $&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt; | cut -d. -f1)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;type=$(echo $&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt; | cut -d. -f2)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# print $filename.$type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# split video &amp;lt;= 1MB&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mp4box -splits &lt;span class=&#34;number&#34;&gt;2000&lt;/span&gt; $filename.$type&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# echo video → audio pcm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; $filename\_*.$type; do&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&#34;ffmpeg $name to pcm&#34;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  ffmpeg -y  -i $name -acodec pcm_s16le -f s16le -ac &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt; -ar &lt;span class=&#34;number&#34;&gt;16000&lt;/span&gt; $name.pcm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  rm $name&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;done&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# audio to text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; $filename\_*.pcm; do&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&#34;$py $name&#34;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  python3 $py $name&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;comment&#34;&gt;# rm $name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#id-key-py"><span class="toc-number">1.</span> <span class="toc-text">id_key.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#google"><span class="toc-number">2.</span> <span class="toc-text">google</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#baidu-py"><span class="toc-number">3.</span> <span class="toc-text">baidu.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qq-py"><span class="toc-number">4.</span> <span class="toc-text">qq.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xfyun-py"><span class="toc-number">5.</span> <span class="toc-text">xfyun.py</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        More how to convert video to text
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">LeiHao's Blog</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-07-23T10:43:53.000Z" itemprop="datePublished">2018-07-23</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Machine-Learning/" rel="tag">Machine Learning</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>I tried the XFyun, but it’s not suitable for the recognized result, so I am looking for another recognizer to do some tests.</p>
<ul>
<li><p><a href="https://ai.qq.com/product/aaiasr.shtml" target="_blank" rel="noopener">QQ</a></p>
</li>
<li><p><a href="https://ai.baidu.com/docs#/ASR-Online-Python-SDK/top" target="_blank" rel="noopener">Baidu</a></p>
</li>
<li><p><a href="https://cloud.google.com/speech-to-text/" target="_blank" rel="noopener">Google</a></p>
</li>
</ul>
<p>The great news is that they all support the <code>PCM</code> type that converted earlier, so I need to do some change to the shell. When you want to compare the results from different recognizer, just run:</p>
<p><code>test.sh xfyun.py|baidu.py|qq.py test.mp4|.m4a</code></p>
<p>Honestly, Google’s result looks better with the human eyes of a glance.</p>
<p><code>test.sh</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/zsh</span></span><br><span class="line"></span><br><span class="line">py=$<span class="number">1</span></span><br><span class="line"></span><br><span class="line">filename=$(echo $<span class="number">2</span> | cut -d. -f1)</span><br><span class="line">type=$(echo $<span class="number">2</span> | cut -d. -f2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># print $filename.$type</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># split video &lt;= 1MB</span></span><br><span class="line">mp4box -splits <span class="number">2000</span> $filename.$type</span><br><span class="line"></span><br><span class="line"><span class="comment"># echo video → audio pcm</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> $filename\_*.$type; do</span><br><span class="line">  <span class="keyword">print</span> <span class="string">"ffmpeg $name to pcm"</span></span><br><span class="line">  ffmpeg -y  -i $name -acodec pcm_s16le -f s16le -ac <span class="number">1</span> -ar <span class="number">16000</span> $name.pcm</span><br><span class="line">  rm $name</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="comment"># audio to text</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> $filename\_*.pcm; do</span><br><span class="line">  <span class="keyword">print</span> <span class="string">"$py $name"</span></span><br><span class="line">  python3 $py $name</span><br><span class="line">  <span class="comment"># rm $name</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h2 id="id-key-py"><a href="#id-key-py" class="headerlink" title="id_key.py"></a>id_key.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;</span><br><span class="line">    <span class="string">"xfyun"</span>: &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"key"</span>: <span class="string">""</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"baidu"</span>: &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"key"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"secret"</span>: <span class="string">""</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"qq"</span>: &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="string">"key"</span>: <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="google"><a href="#google" class="headerlink" title="google"></a>google</h2><p>They have an online submit a file, so I skip to write a *.py 😝</p>
<h2 id="baidu-py"><a href="#baidu-py" class="headerlink" title="baidu.py"></a>baidu.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> id_key</span><br><span class="line">app_id = id_key.dic[<span class="string">'baidu'</span>][<span class="string">'id'</span>]</span><br><span class="line">app_key = id_key.dic[<span class="string">'baidu'</span>][<span class="string">'key'</span>]</span><br><span class="line">secret = id_key.dic[<span class="string">'baidu'</span>][<span class="string">'secret'</span>]</span><br><span class="line"></span><br><span class="line">client = AipSpeech(app_id, app_key, secret)</span><br><span class="line"></span><br><span class="line">print(sys.argv[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_file_content</span><span class="params">(filePath)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(filePath, <span class="string">'rb'</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        <span class="keyword">return</span> fp.read()</span><br><span class="line"></span><br><span class="line">res=client.asr(get_file_content(sys.argv[<span class="number">1</span>]), <span class="string">'pcm'</span>, <span class="number">16000</span>, &#123;</span><br><span class="line">    <span class="string">'dev_pid'</span>: <span class="number">1537</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<h2 id="qq-py"><a href="#qq-py" class="headerlink" title="qq.py"></a>qq.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time, random, base64, json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> id_key</span><br><span class="line">app_id = id_key.dic[<span class="string">'qq'</span>][<span class="string">'id'</span>]</span><br><span class="line">app_key = id_key.dic[<span class="string">'qq'</span>][<span class="string">'key'</span>]</span><br><span class="line"></span><br><span class="line">api_url=<span class="string">'https://api.ai.qq.com/fcgi-bin/aai/aai_asr'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">md5</span><span class="params">(string)</span>:</span></span><br><span class="line">    md = hashlib.md5()</span><br><span class="line">    md.update(string)</span><br><span class="line">    md5 = md.hexdigest().upper()</span><br><span class="line">    <span class="keyword">return</span> md5</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">signify</span><span class="params">(args, app_key)</span>:</span></span><br><span class="line">    query_str = urlencode(args)</span><br><span class="line">    query_str = query_str + <span class="string">'&amp;app_key='</span> + app_key</span><br><span class="line">    signiture = md5(query_str.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">return</span> signiture</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">urlencode</span><span class="params">(args)</span>:</span></span><br><span class="line">    tuples = [(k, args[k]) <span class="keyword">for</span> k <span class="keyword">in</span> sorted(args.keys()) <span class="keyword">if</span> args[k]]</span><br><span class="line">    query_str = urllib.parse.urlencode(tuples)</span><br><span class="line">    <span class="keyword">return</span> query_str</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">http_post</span><span class="params">(api_url, args)</span>:</span></span><br><span class="line">    resp = requests.post(url=api_url, data=args)</span><br><span class="line">    resp = json.loads(resp.text)</span><br><span class="line">    <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseASR</span><span class="params">(object)</span>:</span></span><br><span class="line">    ext2idx = &#123;<span class="string">'pcm'</span>: <span class="string">'1'</span>, <span class="string">'wav'</span>: <span class="string">'2'</span>, <span class="string">'amr'</span>: <span class="string">'3'</span>, <span class="string">'slk'</span>: <span class="string">'4'</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, api_url, app_id, app_key)</span>:</span></span><br><span class="line">        self.api_url = api_url</span><br><span class="line">        self.app_id = app_id</span><br><span class="line">        self.app_key = app_key</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stt</span><span class="params">(self, audio_file, ext, rate)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exceptin(<span class="string">"Unimplemented!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicASR</span><span class="params">(BaseASR)</span>:</span></span><br><span class="line">    <span class="string">""" Online ASR from Tencent</span></span><br><span class="line"><span class="string">    https://ai.qq.com/doc/aaiasr.shtml</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(BasicASR, self).__init__(api_url, app_id, app_key)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stt</span><span class="params">(self, audio_file, ext=<span class="string">'pcm'</span>, rate=<span class="number">16000</span>)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> ext == <span class="string">'pcm'</span>:</span><br><span class="line">            <span class="comment"># wf = wave.open(audio_file)</span></span><br><span class="line">            <span class="comment"># nf = wf.getnframes()</span></span><br><span class="line">            <span class="comment"># audio_data = wf.readframes(nf)</span></span><br><span class="line">            f = open(audio_file, <span class="string">'rb'</span>)</span><br><span class="line">            audio_data = f.read()</span><br><span class="line">            f.close()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"Unsupport audio file format!"</span>)</span><br><span class="line"></span><br><span class="line">        args = &#123;</span><br><span class="line">            <span class="string">'app_id'</span>: self.app_id,</span><br><span class="line">            <span class="string">'time_stamp'</span>: str(int(time.time())),</span><br><span class="line">            <span class="string">'nonce_str'</span>: <span class="string">'%.x'</span> % random.randint(<span class="number">1048576</span>, <span class="number">104857600</span>),</span><br><span class="line">            <span class="string">'format'</span>: self.ext2idx[ext],</span><br><span class="line">            <span class="string">'rate'</span>: str(rate),</span><br><span class="line">            <span class="string">'speech'</span>: base64.b64encode(audio_data),</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        signiture = signify(args, self.app_key)</span><br><span class="line">        args[<span class="string">'sign'</span>] = signiture</span><br><span class="line">        resp = http_post(self.api_url, args)</span><br><span class="line">        print(resp)</span><br><span class="line">        text = resp[<span class="string">'data'</span>][<span class="string">'text'</span>].encode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># if DE<span class="doctag">BUG:</span></span></span><br><span class="line">        <span class="keyword">return</span> text</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">asr_engine = BasicASR()</span><br><span class="line">text = asr_engine.stt(sys.argv[<span class="number">1</span>])</span><br><span class="line">print(text)</span><br></pre></td></tr></table></figure>

<h2 id="xfyun-py"><a href="#xfyun-py" class="headerlink" title="xfyun.py"></a>xfyun.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> id_key</span><br><span class="line">app_id = id_key.dic[<span class="string">'xfyun'</span>][<span class="string">'id'</span>]</span><br><span class="line">api_key = id_key.dic[<span class="string">'xfyun'</span>][<span class="string">'key'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://api.xfyun.cn/v1/service/v1/iat'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(argv)</span>:</span></span><br><span class="line">    f = open(argv[<span class="number">1</span>], <span class="string">'rb'</span>)</span><br><span class="line">    file_content = f.read()</span><br><span class="line">    base64_audio = base64.b64encode(file_content)</span><br><span class="line">    body = urllib.parse.urlencode(&#123;<span class="string">'audio'</span>: base64_audio&#125;).encode(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    param = &#123;<span class="string">"engine_type"</span>: <span class="string">"sms16k"</span>, <span class="string">"aue"</span>: <span class="string">"raw"</span>&#125;</span><br><span class="line"></span><br><span class="line">    param_str = json.dumps(param)</span><br><span class="line">    param_utf8 = param_str.replace(<span class="string">' '</span>, <span class="string">''</span>).encode(<span class="string">'utf8'</span>)</span><br><span class="line">    param_b64 = base64.b64encode(param_utf8)</span><br><span class="line">    param_b64str = param_b64.decode(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line">    x_time = str(int(time.time()))</span><br><span class="line">    checksum = (api_key + x_time + param_b64str).encode(<span class="string">'utf8'</span>)</span><br><span class="line">    x_checksum = hashlib.md5(checksum).hexdigest()</span><br><span class="line">    x_header = &#123;<span class="string">'X-Appid'</span>: app_id,</span><br><span class="line">                <span class="string">'X-CurTime'</span>: x_time,</span><br><span class="line">                <span class="string">'X-Param'</span>: param_b64str,</span><br><span class="line">                <span class="string">'X-CheckSum'</span>: x_checksum&#125;</span><br><span class="line"></span><br><span class="line">    req = urllib.request.Request(url, data=body, headers=x_header)</span><br><span class="line">    response = urllib.request.urlopen(req)</span><br><span class="line">    result = response.read().decode(<span class="string">'utf8'</span>)</span><br><span class="line">    dic = json.loads(result)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> dic[<span class="string">'data'</span>] != <span class="string">""</span>:</span><br><span class="line">        print(dic[<span class="string">'data'</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(result)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main(sys.argv)</span><br></pre></td></tr></table></figure>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/donate/">Donate</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#id-key-py"><span class="toc-number">1.</span> <span class="toc-text">id_key.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#google"><span class="toc-number">2.</span> <span class="toc-text">google</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#baidu-py"><span class="toc-number">3.</span> <span class="toc-text">baidu.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#qq-py"><span class="toc-number">4.</span> <span class="toc-text">qq.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xfyun-py"><span class="toc-number">5.</span> <span class="toc-text">xfyun.py</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&text=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&is_video=false&description=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=More how to convert video to text&body=Check out this article: https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/" target="_blank" rel="noopener"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&title=More how to convert video to text" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://leihao0.github.io/2018/07/23/More-how-to-convert-video-to-text/&name=More how to convert video to text&description=&lt;p&gt;I tried the XFyun, but it’s not suitable for the recognized result, so I am looking for another recognizer to do some tests.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://ai.qq.com/product/aaiasr.shtml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;QQ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://ai.baidu.com/docs#/ASR-Online-Python-SDK/top&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Baidu&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://cloud.google.com/speech-to-text/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The great news is that they all support the &lt;code&gt;PCM&lt;/code&gt; type that converted earlier, so I need to do some change to the shell. When you want to compare the results from different recognizer, just run:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;test.sh xfyun.py|baidu.py|qq.py test.mp4|.m4a&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Honestly, Google’s result looks better with the human eyes of a glance.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;test.sh&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight python&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/zsh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;py=$&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;filename=$(echo $&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt; | cut -d. -f1)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;type=$(echo $&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt; | cut -d. -f2)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# print $filename.$type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# split video &amp;lt;= 1MB&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mp4box -splits &lt;span class=&#34;number&#34;&gt;2000&lt;/span&gt; $filename.$type&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# echo video → audio pcm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; $filename\_*.$type; do&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&#34;ffmpeg $name to pcm&#34;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  ffmpeg -y  -i $name -acodec pcm_s16le -f s16le -ac &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt; -ar &lt;span class=&#34;number&#34;&gt;16000&lt;/span&gt; $name.pcm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  rm $name&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;done&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# audio to text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; name &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; $filename\_*.pcm; do&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&#34;$py $name&#34;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  python3 $py $name&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;comment&#34;&gt;# rm $name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;done&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 LeiHao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/donate/">Donate</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-45400676-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'Artwalk';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
